<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="../js/jquery-3.1.0.min.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
</head>

<body>
    <script>
        window.onload = function() {
            var rcode = getURLParams("rcode");
            var game_id = getURLParams("game_id");
            $.ajax({
                url: '/tcs/timeon/getRcodeUrl.do',
                dataType: 'json',
                type: 'post',
                data: {
                    "rcode": rcode,
                    "game_id": game_id
                },
                async: false,
                success: function(jsonData) {
                    var url = jsonData.url;
                    location.href = url;
                },
                error: function(jsonData) {
                    //alert("对不起，系统正忙请您稍后重试!");
                }

            });
        };

        function getURLParams(paras) {
            var url = window.location.href;
            var paraString = url.substring(url.indexOf("?") + 1, url.length)
                .split("&");
            var paraObj = {};
            for (i = 0; j = paraString[i]; i++) {
                paraObj[j.substring(0, j.indexOf("=")).toLowerCase()] = j
                    .substring(j.indexOf("=") + 1, j.length);
            }
            var returnValue = paraObj[paras.toLowerCase()];

            if (typeof(returnValue) == "undefined") {
                return "";
            } else {
                return returnValue;
            }

        }
    </script>
</body>

</html>