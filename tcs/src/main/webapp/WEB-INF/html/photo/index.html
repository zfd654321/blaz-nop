<!DOCTYPE html>
<!-- saved from url=(0086)http://vip9.wall.49109.com/v1/app/index.php?i=2&c=entry&rid=9&do=dpm_3dqd&m=haoman_dpm -->
<html style="font-size: 137.143px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=1600,user-scalable=no" />

    <title>微信墙演示</title>
    <link href="css/index.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="css/3d.css">
    <link rel="stylesheet" href="css/style.css" media="screen" type="text/css">
    <link rel="stylesheet" href="css/normalize.css">
    <script src="js/jquery-3.1.0.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    //判断浏览器类型
    var Sys = {};
    var ua = navigator.userAgent.toLowerCase();
    var s;
    (s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1]:
        (s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
        (s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
        (s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
        (s = ua.match(/micromessenger.([\d.]+)/)) ? Sys.micromessenger = s[1] :
        (s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
    if (!(Sys.chrome || Sys.firefox || Sys.safari || Sys.micromessenger)) { //Js判断为谷歌chrome、火狐firefox浏览器、苹果safari
        document.write('</br><font size="1" color="white">查看3D效果请使用：谷歌chrome、火狐firefox，苹果safari或微信</font>');
    }


    </script>
    <style type="text/css">
        #kploading{
            -webkit-transform: translateZ(0);
            -moz-transform: translateZ(0);
            -ms-transform: translateZ(0);
            -o-transform: translateZ(0);
            transform: translateZ(0);
        }
        body{
            
        }
    </style>
</head>

<body>
<div style="height:800px">
    <div class="mark-loading" style="display: none;"></div>
    <div id="kploading" style="display: none;">
        <div class="ball-big">
            <div class="plane plane-1"></div>
            <div class="plane plane-2"></div>
            <div class="plane plane-3"></div>
            <div class="plane plane-4"></div>
            <div class="plane plane-5"></div>
            <div class="plane plane-6"></div>
        </div>
    </div>
    <div class="container" style="position: absolute;z-index: 99">
            <!-- <button style="background: rgba(0,0,0,0.5);padding: 5px 10px;border-radius: 5px;margin: 5px;color: #fbf5be;" id="full">全屏展示</button>
        <button style="background: rgba(0,0,0,0.5);padding: 5px 10px;border-radius: 5px;margin: 5px;color: #fbf5be;display: none" id="exitFull">退出全屏</button>
        <button class="on" style="background: rgba(0,0,0,0.5);padding: 5px 10px;border-radius: 5px;margin: 5px;color: #fbf5be;" onclick="lanren.changeClass(this,'media')" id="audio-btn">关闭声音</button> -->
    </div>
    <div id="container" style="display: block;"><div class="abc" style="overflow: hidden; transform-style: preserve-3d; width: 1920px; height: 977px; position: absolute; perspective: 1342.14px;"><div style="transform-style: preserve-3d; width: 1920px; height: 977px;"><div class="element" style="position: absolute;"></div></div></div></div>
    <canvas class="canvas" height="977" width="1920" style="display: inline-block;"></canvas>


    </div>
    <script type="text/javascript">
    </script>
    <script type="text/javascript">
    var is_show_info = 1;
    var hFont;
	var gap = 12;
    (function(doc, win) {
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
            recalc = function() {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth) return;
                hFont = 60;
                docEl.style.fontSize = hFont + 'px';
            };

        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
    </script>

    <script src="js/2d.js"></script>
    <script type="text/javascript">
    var personArray = new Array;
	
    

        </script>
        
        <script src="js/arrfiles.js"></script>
         
    <script type="text/javascript">
    QD.Dc.init('.canvas');

  


    var edit_personArray = new Array;
    var table = new Array;
    for (var i = 0; i < 160; i++) {
        table[i] = new Object();
        if (i < personArray.length) {
            table[i] = personArray[i];
            table[i].src = personArray[i].thumb_image;
        } 
        table[i].p_x = i % 20 + 1;
        table[i].p_y = Math.floor(i / 20) + 1;
    }


    table = table.sort(function() {
        return Math.random()
    });


    var signwall_show_str = "博乐|宝星行|#torus|#sphere|#grid|#helix";
	//var signwall_show_str = "#torus|#sphere|#grid|#helix";
    var return_array = new Array();

    function getArrayItems(arr, num) {
        var temp_array = new Array();
        for (var index in arr) {
            temp_array.push(arr[index]);
        }

        for (var i = 0; i < num; i++) {
            if (temp_array.length > 0) {
                var arrIndex = Math.floor(Math.random() * temp_array.length);
                return_array[i] = temp_array[arrIndex];
                temp_array.splice(arrIndex, 1);
            } else {
                return false;
            }
        }
        return return_array;
    }
    getArrayItems(personArray, 50);

    window.onload = function() {
        $("#kploading").hide();
        $(".mark-loading").hide();
        QD.init();
        //document.getElementById("media").play();
        QD.UI.simulate(signwall_show_str);
        
    }



    var newPic = new Array(),
        signNo = 0,
        name,qdword;
    setInterval(function() {
        if (newPic.length > 0) {

            var firstInfo = newPic.shift();
            // console.log(newPic.length);
            var showImg = firstInfo.image;
            name = firstInfo.name;
            qdword = firstInfo.qdword;
            
            personArray.push(firstInfo);

            $('.element').eq(personArray.length - 1).find('img').attr('src', showImg);

                        $("#qdimg").attr('src', showImg);
            $('#qdname').html(name);
            $(".mark-ewm").show();
            $('#url_code').show().css('top', ($(window).height() - 550) / 2);
            setTimeout(function() {
                $(".mark-ewm").hide();
                $('#url_code').hide();
            }, 4000);

                            

        } 
        
        
        getArrayItems(personArray, 50);
            
    }, 8000);
    </script>
    <script src="js/three.min.js"></script>
    <script src="js/tween.min.js"></script>
    <script src="js/CSS3DRenderer.js"></script>
    <script src="js/3d.js"></script>
    <script type="text/javascript">
    init();
    animate();
    </script>
    <script type="text/javascript">
    var stop = false
    setInterval(get_new_sign_list, 5000);

    function get_new_sign_list() {
		var merchant_id="";
        var data = {};
        if (stop) return;

        stop = true;
        data.max_id = $('#max_id').val();
        // console.log(data.max_id)
        $.ajax({
            url: "./BLWXV3.0/sign/getFirstOpenHtmlInfo.do?merchant_id="+merchant_id,
            dataType: "JSON",
            type: "GET",
            data: data,
            success: function(result) {
                    if (result.max_id) {
                        $('#max_id').val(result.max_id);
                    }
                    if (result.record) {
	   
                        $.each(result.record, function(key, row) {
                            var tmp = {
                                id: row.id,
                                image: row.avatar,
                               thumb_image: row.thumb_image,
                              thumb_image_46: row.thumb_image_46,
                                name: row.nickname,
                               qdword: row.qdword
                            };
                            var person_info = eval(tmp);
                            newPic.push(person_info);
                        });
                        
                    }

                stop = false;

            }
        });
    }
    </script>


<div class="main">
<div class="photo_wall" id="photo_wall">
</div>
</div>
<script type="text/javascript">


$(function (){	
	setTimeout("secondStep()", 2000);
});
var i=0;
var s_top=0;
var s_left=0;
function secondStep(){
	i+=1;
	
	if(i%8==1){
		if(i>16){
			$("#photo_wall").css("margin-top",(parseInt($("#photo_wall").css("margin-top"))-250+"px"));
			if(i>32){
				for(var j=0;j<8;j++){
					$("#photo_wall .photo:first-child").remove();
				}
			}
		}
		if(i>8){
			s_top+=250;
		}
		random_list=[0,1,2,3,4,5,6,7];
		random_count=8;
	}
	var str="";
	str+='<div class="photo" id="photo'+i+'" style="top:'+s_top+'px"><img src="http://192.168.10.108:9092/BLFiles/attachment/APP/V3.0/GravityLens/image/BLImageDID2017000220171201105338.jpg" width="166" height="300"></div>'
	
	$("#photo_wall").append(str);
	
	
	setTimeout("leadTran()", 200);
	if(i<40){
	setTimeout("secondStep()", 2000);
	}
}


var random_list=[0,1,2,3,4,5,6,7];
var random_count=8;


function leadTran(){
	//var left=0;
	//var top=0;
	//if(i%4==0){
	//	left=(parseInt(700*Math.random()));
	//	top=(parseInt(300*Math.random()));
	//}else if(i%4==1){
	//	left=700+(parseInt(700*Math.random()));
	//	top=300+(parseInt(300*Math.random()));
	//}else if(i%4==2){
	//	left=700+(parseInt(700*Math.random()));
	//	top=(parseInt(300*Math.random()));
	//}else if(i%4==3){
	//	left=(parseInt(700*Math.random()));
	//	top=300+(parseInt(300*Math.random()));
	//}
	if(random_count>0){
		var s=parseInt(random_count*Math.random());
		s_left=random_list[s]*188
		random_list[s]=random_list[(random_count-1)];
		random_count-=1;
	}
	
	$("#photo"+i).css("left",s_left+'px');
	$("#photo"+i).css("top",s_top+'px');
	var rotate=(parseInt(60*Math.random()))-30;
	$("#photo"+i).css("transform",'rotate('+rotate+'deg)');
}

</script>


</body></html>